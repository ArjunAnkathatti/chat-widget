$(document).ready(function(){$("head").append("<style type=\"text/css\">.chatbox{position:fixed;bottom:0;right:0;width:350px;height:100vh;background-color:#fff;font-family:'Lato',sans-serif;-webkit-transition:all 600ms cubic-bezier(.19,1,.22,1);transition:all 600ms cubic-bezier(.19,1,.22,1);display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;z-index:1000}.chatbox--tray{bottom:calc(50px - 100vh)}.chatbox--closed{bottom:-100vh}.chatbox .form-control:focus{border-color:#1f2836}.chatbox__body,.chatbox__title{border-bottom:none}.chatbox__title{color:#fdc42e;min-height:50px;padding-right:10px;background-color:#1f2836;border-top-left-radius:4px;border-top-right-radius:4px;cursor:pointer;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.chatbox__title h5{height:50px;margin:0 0 0 15px;line-height:50px;position:relative;padding-left:20px;-webkit-flex-grow:1;flex-grow:1}.chatbox__title h5 a{color:#fdc42e;max-width:195px;display:inline-block;text-decoration:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chatbox__title h5:before{content:'';display:block;position:absolute;top:50%;left:0;width:12px;height:12px;background:#4caf50;border-radius:6px;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.chatbox__title__close,.chatbox__title__tray{width:24px;height:24px;outline:0;border:0;background-color:transparent;opacity:.5;cursor:pointer;-webkit-transition:opacity 200ms;transition:opacity 200ms}.chatbox__title__close:hover,.chatbox__title__tray:hover{opacity:1}.chatbox__title__tray span{width:12px;height:12px;display:inline-block;border-bottom:2px solid #fff}.chatbox__title__close svg{vertical-align:middle;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.2px}.chatbox__body,.chatbox__credentials{padding:15px;border-top:0;background-color:#fff;border-left:1px solid #ddd;border-right:1px solid #ddd;-webkit-flex-grow:1;flex-grow:1}.chatbox__credentials{display:none}.chatbox__credentials .form-control{-webkit-box-shadow:none;box-shadow:none}.chatbox__body{overflow-y:auto}.chatbox__body__message{position:relative}.chatbox__body__message p{padding:10px;border-radius:4px;font-size:14px;background-color:#fff;-webkit-box-shadow:1px 1px rgba(100,100,100,.1);box-shadow:1px 1px rgba(100,100,100,.1)}.chatbox__body__message img{width:40px;height:40px;border-radius:4px;border:2px solid #fcfcfc;position:absolute;top:5px}.chatbox__body__message--left p{width:85%;float:left;text-align:left;background-color:#e5f1d8}.chatbox__body__message--left img{left:-5px}.chatbox__body__message--right p{width:85%;float:right;text-align:right;background-color:#ddeaf1}.chatbox__body__message--right img{right:-5px}.chatbox__message{padding:15px;min-height:50px;outline:0;resize:none;font-size:12px;border:1px solid #ddd;border-bottom:none;background-color:#fefefe}.chatbox--empty{height:300px}.chatbox--empty.chatbox--tray{bottom:-250px}.chatbox--empty.chatbox--closed{bottom:-300px}.chatbox--empty .chatbox__body,.chatbox--empty .chatbox__message{display:none}.chatbox--empty .chatbox__credentials{display:block}</style>");$("body").append('<div class="chatbox chatbox--tray chatbox--empty">     <div class="chatbox__title">     <h5><a href="#">VIDURA Advisor</a></h5>     \x3c!-- minimize button --\x3e     <button class="chatbox__title__tray">     <span></span>     </button>     \x3c!-- minimize button ends --\x3e     \x3c!-- Close button which closes the chatbot --\x3e     <button class="chatbox__title__close">     <span>     <svg viewBox="0 0 12 12" width="12px" height="12px">     <line stroke="#FFFFFF" x1="11.75" y1="0.25" x2="0.25" y2="11.75"></line>     <line stroke="#FFFFFF" x1="11.75" y1="11.75" x2="0.25" y2="0.25"></line>     </svg>     </span>     </button>     \x3c!-- close button ends --\x3e     </div>     <div class="chatbox__body" id="chatbox_body_content">     </div>     <form class="chatbox__credentials">     <div class="form-group">     <label for="inputName">Name:</label>     <input type="text" class="form-control" id="inputName" required>     </div>     <div class="form-group">     <label for="inputEmail">Email:</label>     <input type="text" class="form-control" id="inputEmail" required>     </div>     <button type="submit" class="btn btn-success btn-block">Enter Chat</button>     </form>     <input type="hidden" id="chat_context" name="conversation_id" value="{}">     <input type="text" id="user_input" name="user_input" class="chatbox__message" placeholder="Write here"></input>     </div>');var o=$(".chatbox"),t=$(".chatbox__title"),e=$(".chatbox__title__close"),a=$(".chatbox__credentials");function i(t){var e='<div class="chatbox__body__message chatbox__body__message--left"><p>'+(t=""==$.trim(t)?"I couldn't get that. Let' try something else!":t.replace(new RegExp("\r?\n","g"),"<br />"))+"</p></div>";$("#chatbox_body_content").append(e),$("#chatbox_body_content").scrollTop(1e10)}function s(t,e){$.ajax({type:"GET",url:"https://api.api.ai/v1/query?v=20160910&query="+t+"&lang=en-us&sessionId="+n,contentType:"application/json",dataType:"json",headers:{Authorization:"Bearer 8cbe1c4eb8484f738b3e12cb4090683b"},success:function(t){!function(t){t.result.action;var e=t.result.fulfillment.speech;t.result.actionIncomplete;if(t.result.fulfillment.messages&&0<t.result.fulfillment.messages.length)t.result.fulfillment.messages[1];i(e)}(t)},error:function(t){console.log(t)}})}t.on("click",function(){o.toggleClass("chatbox--tray")}),e.on("click",function(t){t.stopPropagation(),o.addClass("chatbox--closed")}),o.on("transitionend",function(){o.hasClass("chatbox--closed")&&o.remove()}),a.on("submit",function(t){t.preventDefault(),o.removeClass("chatbox--empty");var e=$("#inputName").val();$("#inputEmail").val();i("Hello <b>"+e+"</b>!, welcome to CyNeuro portal, I am VIDURA your virtual agent.How can I help you?")}),$("#user_input").keypress(function(t){var e;if(13==(t.keyCode?t.keyCode:t.which)){var o=$("#user_input").val();$("#chat_context").val();e='<div class="chatbox__body__message chatbox__body__message--right"><p>'+o+"</p></div>",$("#chatbox_body_content").append(e),$("#user_input").val(""),$("#chatbox_body_content").scrollTop(1e10),s(o)}});var n=function(){if(sessionStorage.getItem("session"))var t=sessionStorage.getItem("session");else{var e=Math.floor(1e3*Math.random()+1),o=Date.now(),a=new Date,i=new Array(7);i[0]="Sunday",i[1]="Monday",i[2]="Tuesday",i[3]="Wednesday",i[4]="Thursday",i[5]="Friday",i[6]="Saturday";var s=e+i[a.getDay()]+o;sessionStorage.setItem("session",s),t=sessionStorage.getItem("session")}return t}()});